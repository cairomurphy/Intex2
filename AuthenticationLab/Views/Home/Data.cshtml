@{
}
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@model CrashesViewModel

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

<!-- Masthead-->
<header class="masthead">
    <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center">
        <div class="d-flex justify-content-center">
            <div class="text-center">
                <h1 class="mx-auto my-0 text-uppercase">Crash Data</h1>
                <h2 class="text-white-50 mx-auto mt-2 mb-5">This is a hub for crash data, severity prediction, and safety education.</h2>
                <a class="btn btn-primary" href="#data">View Data</a>
            </div>
        </div>
    </div>
</header>

<!--Data-->
<section class="about-section text-center" id="data">
    <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-lg-8">
                <h2 class="text-white mb-4">Utah Crash Data</h2>
            </div>
        </div>
    </div>
</section>

<div class="row">
    <div class="col">
        <vc:counties></vc:counties>
    </div>

    @if (SignInManager.IsSignedIn(User)) { 
        <div class="col">
            <a class="btn btn-primary" asp-controller="Home" asp-action="Add">Add a Crash</a>
        </div>
     }
</div>

<table class="table table-dark table-hover table-sm">
    <thead>
        <tr>
            <td>Crash ID</td>
            <td>Crash Datetime</td>
            <td>Road</td>
            <td>City</td>
            <td>County</td>
            <td>Severity</td>
        </tr>
    </thead>

    @foreach (Crash c in Model.mytable)
    {
<tr>
    <td><a asp-controller="Home" asp-action="Details" asp-route-crashid="@c.CRASH_ID">@c.CRASH_ID</a></td>
    <td>@c.CRASH_DATETIME</td>
    <td>@c.MAIN_ROAD_NAME</td>
    <td>@c.CITY</td>
    <td>@c.COUNTY_NAME</td>
    <td>@c.CRASH_SEVERITY_ID</td>
    @if (SignInManager.IsSignedIn(User))
    {
        <td><a class="btn btn-warning" asp-controller="Home" asp-action="Edit" asp-route-crashid="@c.CRASH_ID">Edit</a></td>
        <td><a class="btn btn-danger" asp-controller="Home" asp-action="Delete" asp-route-crashid="@c.CRASH_ID">Delete</a></td>
    }


</tr>
    }
</table>


<div page-blah="@Model.PageInfo" page-action="Data" page-class="btn"
     page-class-normal="btn-outline-dark" page-class-selected="btn-primary" page-classes-enabled="true" class="btn-group pull-right m-1"></div>
